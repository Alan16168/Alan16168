<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCçœæˆ¿ä¸œç®¡ç†ç³»ç»Ÿ - APIæµ‹è¯•é¡µé¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .input-group input,
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-right: 10px;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }

        .response-box {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            max-height: 400px;
            overflow-y: auto;
        }

        .response-box pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .success {
            color: #28a745;
            font-weight: 600;
        }

        .error {
            color: #dc3545;
            font-weight: 600;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .info-box strong {
            color: #2196F3;
        }

        .token-display {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            word-break: break-all;
            font-family: monospace;
        }

        .chat-message {
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            line-height: 1.6;
        }

        .chat-message.user {
            background: #667eea;
            color: white;
            margin-left: 20%;
        }

        .chat-message.assistant {
            background: #f1f3f5;
            margin-right: 20%;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .status-online {
            background: #28a745;
            box-shadow: 0 0 5px #28a745;
        }

        .status-offline {
            background: #dc3545;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .test-questions {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }

        .test-questions h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .test-questions button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .test-questions button:hover {
            background: #e9ecef;
            border-color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ  BCçœæˆ¿ä¸œç®¡ç†ç³»ç»Ÿ</h1>
            <p>APIæµ‹è¯•ç•Œé¢ - å®Œæ•´åŠŸèƒ½æ¼”ç¤º</p>
            <div style="margin-top: 15px;">
                <span class="status-indicator status-online" id="statusIndicator"></span>
                <span id="statusText">æ£€æŸ¥ä¸­...</span>
            </div>
        </div>

        <div class="content">
            <!-- ç³»ç»Ÿä¿¡æ¯ -->
            <div class="info-box">
                <strong>ğŸ“Œ ä½¿ç”¨è¯´æ˜ï¼š</strong><br>
                1. å…ˆç‚¹å‡»"æ£€æŸ¥ç³»ç»ŸçŠ¶æ€"ç¡®è®¤åç«¯è¿è¡Œæ­£å¸¸<br>
                2. æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·æˆ–ä½¿ç”¨æ¼”ç¤ºè´¦æˆ·ç™»å½•<br>
                3. ç™»å½•åå¯ä»¥æµ‹è¯•AIèŠå¤©ã€æŸ¥çœ‹å†å²ç­‰åŠŸèƒ½<br>
                4. Tokenä¼šè‡ªåŠ¨ä¿å­˜ï¼Œåˆ·æ–°é¡µé¢åä»ç„¶æœ‰æ•ˆ
            </div>

            <!-- ç¬¬ä¸€éƒ¨åˆ†ï¼šç³»ç»ŸçŠ¶æ€ -->
            <div class="section">
                <h2>ğŸ” 1. ç³»ç»ŸçŠ¶æ€æ£€æŸ¥</h2>
                <button class="btn" onclick="checkHealth()">æ£€æŸ¥ç³»ç»ŸçŠ¶æ€</button>
                <div id="healthResponse" class="response-box" style="display:none;"></div>
            </div>

            <!-- ç¬¬äºŒéƒ¨åˆ†ï¼šç”¨æˆ·è®¤è¯ -->
            <div class="section">
                <h2>ğŸ” 2. ç”¨æˆ·è®¤è¯</h2>
                
                <div class="grid">
                    <div>
                        <h3>æ³¨å†Œæ–°ç”¨æˆ·</h3>
                        <div class="input-group">
                            <label>å§“å</label>
                            <input type="text" id="regName" value="æµ‹è¯•ç”¨æˆ·" placeholder="è¯·è¾“å…¥å§“å">
                        </div>
                        <div class="input-group">
                            <label>é‚®ç®±</label>
                            <input type="email" id="regEmail" placeholder="test@example.com">
                        </div>
                        <div class="input-group">
                            <label>å¯†ç </label>
                            <input type="password" id="regPassword" value="test123456" placeholder="è‡³å°‘6ä½">
                        </div>
                        <div class="input-group">
                            <label>è¯­è¨€</label>
                            <select id="regLanguage">
                                <option value="zh">ä¸­æ–‡</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                        <button class="btn" onclick="register()">æ³¨å†Œ</button>
                    </div>

                    <div>
                        <h3>ç”¨æˆ·ç™»å½•</h3>
                        <div class="input-group">
                            <label>é‚®ç®±</label>
                            <input type="email" id="loginEmail" placeholder="test@example.com">
                        </div>
                        <div class="input-group">
                            <label>å¯†ç </label>
                            <input type="password" id="loginPassword" value="test123456" placeholder="å¯†ç ">
                        </div>
                        <button class="btn" onclick="login()">ç™»å½•</button>
                        <button class="btn btn-secondary" onclick="clearToken()">æ¸…é™¤Token</button>
                    </div>
                </div>

                <div id="authResponse" class="response-box" style="display:none;"></div>
                <div id="tokenDisplay" style="display:none;">
                    <strong>å½“å‰Tokenï¼š</strong>
                    <div class="token-display" id="currentToken"></div>
                </div>
            </div>

            <!-- ç¬¬ä¸‰éƒ¨åˆ†ï¼šAIèŠå¤© -->
            <div class="section">
                <h2>ğŸ¤– 3. AIæ™ºèƒ½èŠå¤©</h2>
                
                <div class="grid">
                    <div>
                        <div class="input-group">
                            <label>è¾“å…¥é—®é¢˜</label>
                            <textarea id="chatMessage" placeholder="ä¾‹å¦‚ï¼šBCçœç§Ÿå®¢å¯ä»¥å…»å® ç‰©å—ï¼Ÿ"></textarea>
                        </div>
                        <div class="input-group">
                            <label>è¯­è¨€</label>
                            <select id="chatLanguage">
                                <option value="zh">ä¸­æ–‡</option>
                                <option value="en">English</option>
                            </select>
                        </div>
                        <button class="btn" onclick="sendChat()">å‘é€æ¶ˆæ¯</button>
                        <button class="btn btn-secondary" onclick="clearChat()">æ¸…ç©ºå¯¹è¯</button>
                    </div>

                    <div class="test-questions">
                        <h3>ğŸ“ å¿«é€Ÿæµ‹è¯•é—®é¢˜</h3>
                        <button onclick="quickTest('BCçœç§Ÿå®¢å¯ä»¥å…»å® ç‰©å—ï¼Ÿ', 'zh')">ğŸ• å® ç‰©æ”¿ç­–</button>
                        <button onclick="quickTest('æˆ¿ä¸œå¦‚ä½•æ¶¨ç§Ÿï¼Ÿ', 'zh')">ğŸ’° ç§Ÿé‡‘ä¸Šæ¶¨</button>
                        <button onclick="quickTest('æŠ¼é‡‘æœ€å¤šå¯ä»¥æ”¶å¤šå°‘ï¼Ÿ', 'zh')">ğŸ¦ æŠ¼é‡‘è§„å®š</button>
                        <button onclick="quickTest('ç§Ÿå®¢æœ‰ä»€ä¹ˆæƒåˆ©ï¼Ÿ', 'zh')">âš–ï¸ ç§Ÿå®¢æƒåˆ©</button>
                        <button onclick="quickTest('Can tenants have pets?', 'en')">ğŸ‡¬ğŸ‡§ Pet Policy</button>
                    </div>
                </div>

                <div id="chatResponse" class="response-box" style="display:none;"></div>
            </div>

            <!-- ç¬¬å››éƒ¨åˆ†ï¼šèŠå¤©å†å² -->
            <div class="section">
                <h2>ğŸ“œ 4. èŠå¤©å†å²</h2>
                <button class="btn" onclick="getChatHistory()">è·å–èŠå¤©å†å²</button>
                <button class="btn btn-secondary" onclick="getSessions()">è·å–æ‰€æœ‰ä¼šè¯</button>
                <div id="historyResponse" class="response-box" style="display:none;"></div>
            </div>

            <!-- ç¬¬äº”éƒ¨åˆ†ï¼šBCçœè¡¨æ ¼ -->
            <div class="section">
                <h2>ğŸ“‹ 5. BCçœç§Ÿèµè¡¨æ ¼</h2>
                <button class="btn" onclick="getForms()">è·å–è¡¨æ ¼åˆ—è¡¨</button>
                <div id="formsResponse" class="response-box" style="display:none;"></div>
            </div>

            <!-- ç¬¬å…­éƒ¨åˆ†ï¼šèƒŒæ™¯è°ƒæŸ¥ -->
            <div class="section">
                <h2>ğŸ” 6. ç§Ÿå®¢èƒŒæ™¯è°ƒæŸ¥</h2>
                <div class="input-group">
                    <label>å§“</label>
                    <input type="text" id="bgFirstName" value="å¼ " placeholder="First Name">
                </div>
                <div class="input-group">
                    <label>å</label>
                    <input type="text" id="bgLastName" value="ä¸‰" placeholder="Last Name">
                </div>
                <div class="input-group">
                    <label>é‚®ç®±</label>
                    <input type="email" id="bgEmail" value="zhangsan@example.com" placeholder="Email">
                </div>
                <button class="btn" onclick="submitBackgroundCheck()">æäº¤èƒŒæ™¯è°ƒæŸ¥</button>
                <button class="btn btn-secondary" onclick="getBackgroundHistory()">æŸ¥çœ‹å†å²</button>
                <div id="bgResponse" class="response-box" style="display:none;"></div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:5000';
        let currentToken = localStorage.getItem('authToken') || '';
        let sessionId = 'test-session-' + Date.now();

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥tokenå’Œç³»ç»ŸçŠ¶æ€
        window.onload = function() {
            if (currentToken) {
                showToken();
            }
            checkHealth();
            // ç”Ÿæˆéšæœºé‚®ç®±
            document.getElementById('regEmail').value = 'test' + Date.now() + '@example.com';
        };

        function showToken() {
            document.getElementById('tokenDisplay').style.display = 'block';
            document.getElementById('currentToken').textContent = currentToken;
        }

        function clearToken() {
            localStorage.removeItem('authToken');
            currentToken = '';
            document.getElementById('tokenDisplay').style.display = 'none';
            showResponse('authResponse', '<span class="success">âœ… Tokenå·²æ¸…é™¤</span>');
        }

        function showResponse(elementId, content) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.innerHTML = content;
        }

        function showLoading(elementId) {
            showResponse(elementId, '<div class="loading"></div> å¤„ç†ä¸­...');
        }

        async function checkHealth() {
            showLoading('healthResponse');
            try {
                const response = await fetch(`${API_URL}/api/health`);
                const data = await response.json();
                
                const statusIndicator = document.getElementById('statusIndicator');
                const statusText = document.getElementById('statusText');
                
                if (data.status === 'OK') {
                    statusIndicator.className = 'status-indicator status-online';
                    statusText.textContent = 'ç³»ç»Ÿè¿è¡Œæ­£å¸¸';
                    showResponse('healthResponse', 
                        `<span class="success">âœ… ç³»ç»Ÿè¿è¡Œæ­£å¸¸</span>
                        <pre>${JSON.stringify(data, null, 2)}</pre>`
                    );
                } else {
                    throw new Error('ç³»ç»Ÿå¼‚å¸¸');
                }
            } catch (error) {
                document.getElementById('statusIndicator').className = 'status-indicator status-offline';
                document.getElementById('statusText').textContent = 'ç³»ç»Ÿç¦»çº¿';
                showResponse('healthResponse', 
                    `<span class="error">âŒ é”™è¯¯ï¼š${error.message}</span>`
                );
            }
        }

        async function register() {
            showLoading('authResponse');
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const language = document.getElementById('regLanguage').value;

            try {
                const response = await fetch(`${API_URL}/api/auth/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, email, password, language })
                });
                const data = await response.json();

                if (data.success) {
                    currentToken = data.token;
                    localStorage.setItem('authToken', currentToken);
                    showToken();
                    document.getElementById('loginEmail').value = email;
                    showResponse('authResponse', 
                        `<span class="success">âœ… æ³¨å†ŒæˆåŠŸï¼</span>
                        <pre>${JSON.stringify(data.user, null, 2)}</pre>`
                    );
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                showResponse('authResponse', 
                    `<span class="error">âŒ é”™è¯¯ï¼š${error.message}</span>`
                );
            }
        }

        async function login() {
            showLoading('authResponse');
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const response = await fetch(`${API_URL}/api/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                const data = await response.json();

                if (data.success) {
                    currentToken = data.token;
                    localStorage.setItem('authToken', currentToken);
                    showToken();
                    showResponse('authResponse', 
                        `<span class="success">âœ… ç™»å½•æˆåŠŸï¼</span>
                        <pre>${JSON.stringify(data.user, null, 2)}</pre>`
                    );
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                showResponse('authResponse', 
                    `<span class="error">âŒ é”™è¯¯ï¼š${error.message}</span>`
                );
            }
        }

        async function sendChat() {
            if (!currentToken) {
                alert('è¯·å…ˆç™»å½•ï¼');
                return;
            }

            showLoading('chatResponse');
            const message = document.getElementById('chatMessage').value;
            const language = document.getElementById('chatLanguage').value;

            try {
                const response = await fetch(`${API_URL}/api/chat/message`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${currentToken}`
                    },
                    body: JSON.stringify({ message, language, sessionId })
                });
                const data = await response.json();

                if (data.success) {
                    let html = `<div class="chat-message user"><strong>æ‚¨ï¼š</strong><br>${message}</div>`;
                    html += `<div class="chat-message assistant"><strong>AIåŠ©æ‰‹ï¼š</strong><br>${data.message}</div>`;
                    
                    if (data.sources && data.sources.length > 0) {
                        html += `<div style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 5px;">`;
                        html += `<strong>ğŸ“š å‚è€ƒæ¥æºï¼š</strong><br>`;
                        data.sources.forEach(source => {
                            html += `â€¢ ${source.documentName} (ç›¸å…³åº¦: ${(source.relevanceScore * 100).toFixed(0)}%)<br>`;
                        });
                        html += `</div>`;
                    }
                    
                    showResponse('chatResponse', html);
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                showResponse('chatResponse', 
                    `<span class="error">âŒ é”™è¯¯ï¼š${error.message}</span>`
                );
            }
        }

        function quickTest(question, language) {
            document.getElementById('chatMessage').value = question;
            document.getElementById('chatLanguage').value = language;
            sendChat();
        }

        function clearChat() {
            document.getElementById('chatResponse').innerHTML = '';
            document.getElementById('chatMessage').value = '';
        }

        async function getChatHistory() {
            if (!currentToken) {
                alert('è¯·å…ˆç™»å½•ï¼');
                return;
            }

            showLoading('historyResponse');
            try {
                const response = await fetch(`${API_URL}/api/chat/history/${sessionId}`, {
                    headers: { 'Authorization': `Bearer ${currentToken}` }
                });
                const data = await response.json();

                if (data.success) {
                    let html = `<span class="success">âœ… å…± ${data.messages.length} æ¡æ¶ˆæ¯</span><br><br>`;
                    data.messages.forEach(msg => {
                        const role = msg.role === 'user' ? 'ğŸ‘¤ ç”¨æˆ·' : 'ğŸ¤– AI';
                        html += `<div class="chat-message ${msg.role}">`;
                        html += `<strong>${role}ï¼š</strong><br>${msg.content}`;
                        html += `</div>`;
                    });
                    showResponse('historyResponse', html);
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                showResponse('historyResponse', 
                    `<span class="error">âŒ é”™è¯¯ï¼š${error.message}</span>`
                );
            }
        }

        async function getSessions() {
            if (!currentToken) {
                alert('è¯·å…ˆç™»å½•ï¼');
                return;
            }

            showLoading('historyResponse');
            try {
                const response = await fetch(`${API_URL}/api/chat/sessions`, {
                    headers: { 'Authorization': `Bearer ${currentToken}` }
                });
                const data = await response.json();

                if (data.success) {
                    showResponse('historyResponse', 
                        `<span class="success">âœ… ä¼šè¯åˆ—è¡¨è·å–æˆåŠŸ</span>
                        <pre>${JSON.stringify(data.sessions, null, 2)}</pre>`
                    );
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                showResponse('historyResponse', 
                    `<span class="error">âŒ é”™è¯¯ï¼š${error.message}</span>`
                );
            }
        }

        async function getForms() {
            if (!currentToken) {
                alert('è¯·å…ˆç™»å½•ï¼');
                return;
            }

            showLoading('formsResponse');
            try {
                const response = await fetch(`${API_URL}/api/forms`, {
                    headers: { 'Authorization': `Bearer ${currentToken}` }
                });
                const data = await response.json();

                if (data.success) {
                    showResponse('formsResponse', 
                        `<span class="success">âœ… è¡¨æ ¼åˆ—è¡¨è·å–æˆåŠŸ</span>
                        <pre>${JSON.stringify(data, null, 2)}</pre>`
                    );
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                showResponse('formsResponse', 
                    `<span class="error">âŒ é”™è¯¯ï¼š${error.message}</span>`
                );
            }
        }

        async function submitBackgroundCheck() {
            if (!currentToken) {
                alert('è¯·å…ˆç™»å½•ï¼');
                return;
            }

            showLoading('bgResponse');
            const firstName = document.getElementById('bgFirstName').value;
            const lastName = document.getElementById('bgLastName').value;
            const email = document.getElementById('bgEmail').value;

            try {
                const response = await fetch(`${API_URL}/api/background-check/request`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${currentToken}`
                    },
                    body: JSON.stringify({ 
                        firstName, 
                        lastName, 
                        email,
                        phone: '778-123-4567',
                        currentAddress: '123 Main St, Vancouver, BC'
                    })
                });
                const data = await response.json();

                if (data.success) {
                    showResponse('bgResponse', 
                        `<span class="success">âœ… èƒŒæ™¯è°ƒæŸ¥è¯·æ±‚æˆåŠŸ</span>
                        <pre>${JSON.stringify(data, null, 2)}</pre>`
                    );
                } else {
                    // PremiumåŠŸèƒ½é™åˆ¶æ˜¯é¢„æœŸçš„
                    showResponse('bgResponse', 
                        `<span style="color: #ff9800;">âš ï¸ ${data.message}</span>
                        <p>è¿™æ˜¯æ­£å¸¸çš„æƒé™æ§åˆ¶ï¼Œéœ€è¦Premiumæˆ–Adminæƒé™ã€‚</p>`
                    );
                }
            } catch (error) {
                showResponse('bgResponse', 
                    `<span class="error">âŒ é”™è¯¯ï¼š${error.message}</span>`
                );
            }
        }

        async function getBackgroundHistory() {
            if (!currentToken) {
                alert('è¯·å…ˆç™»å½•ï¼');
                return;
            }

            showLoading('bgResponse');
            try {
                const response = await fetch(`${API_URL}/api/background-check/history`, {
                    headers: { 'Authorization': `Bearer ${currentToken}` }
                });
                const data = await response.json();

                if (data.success) {
                    showResponse('bgResponse', 
                        `<span class="success">âœ… å†å²è®°å½•è·å–æˆåŠŸ</span>
                        <pre>${JSON.stringify(data, null, 2)}</pre>`
                    );
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                showResponse('bgResponse', 
                    `<span class="error">âŒ é”™è¯¯ï¼š${error.message}</span>`
                );
            }
        }
    </script>
</body>
</html>
