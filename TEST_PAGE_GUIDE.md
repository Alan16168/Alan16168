# 🌐 测试网页使用指南

## 🎉 测试网页已生成！

一个功能完整、界面美观的交互式测试网页已经准备就绪！

---

## 🔗 访问地址

### 公网访问（推荐）
```
https://8080-i75t2b5146b2ag3brd419-ad490db5.sandbox.novita.ai
```

### 本地访问
```
http://localhost:8080
```

---

## ✨ 功能特性

### 🎨 界面特点
- ✅ 现代化渐变紫色主题
- ✅ 响应式设计，自适应各种屏幕
- ✅ 实时状态指示器
- ✅ 美观的聊天气泡界面
- ✅ 平滑的动画效果

### 🔧 功能模块

#### 1. 系统状态检查 🔍
- 实时显示后端运行状态
- 在线/离线状态指示器
- 显示系统配置信息

#### 2. 用户认证 🔐
**注册功能**:
- 输入姓名、邮箱、密码
- 选择语言（中文/英文）
- 自动生成随机邮箱
- 一键注册

**登录功能**:
- 邮箱和密码登录
- Token自动保存到浏览器
- 刷新页面后仍然有效
- 一键清除Token

#### 3. AI智能聊天 🤖
**手动输入**:
- 自由输入问题
- 选择回答语言
- 实时显示AI回答
- 显示参考来源和相关度

**快速测试问题**:
- 🐕 宠物政策：BC省租客可以养宠物吗？
- 💰 租金上涨：房东如何涨租？
- 🏦 押金规定：押金最多可以收多少？
- ⚖️ 租客权利：租客有什么权利？
- 🇬🇧 Pet Policy：Can tenants have pets?

#### 4. 聊天历史 📜
- 查看当前会话的所有消息
- 美观的气泡式消息展示
- 获取所有会话列表
- 消息数量统计

#### 5. BC省租赁表格 📋
- 获取所有可用表格
- 显示表格代码和标题
- 表格分类信息

#### 6. 租客背景调查 🔍
- 提交背景调查请求
- 填写租客信息
- 查看调查历史
- 权限验证演示

---

## 📖 使用步骤

### 第一步：打开测试页面

在浏览器中访问：
```
https://8080-i75t2b5146b2ag3brd419-ad490db5.sandbox.novita.ai
```

### 第二步：检查系统状态

1. 页面加载后会自动检查系统状态
2. 顶部会显示 🟢 绿色指示器和"系统运行正常"
3. 点击"检查系统状态"按钮可手动刷新

### 第三步：注册或登录

**选项A：注册新用户（推荐）**
1. 在"注册新用户"区域
2. 输入姓名（默认：测试用户）
3. 邮箱已自动生成（可修改）
4. 密码默认：test123456
5. 选择语言：中文
6. 点击"注册"按钮

**选项B：使用已有账户**
1. 在"用户登录"区域
2. 输入邮箱和密码
3. 点击"登录"按钮

**成功后**：
- 页面下方会显示"当前Token"
- Token自动保存，刷新页面后仍然有效

### 第四步：测试AI聊天

**方式1：使用快速测试问题（最简单）**
1. 在"AI智能聊天"模块
2. 点击右侧的快速测试按钮：
   - 🐕 宠物政策
   - 💰 租金上涨
   - 🏦 押金规定
   - ⚖️ 租客权利
3. AI会立即回答，显示在下方

**方式2：手动输入问题**
1. 在文本框输入您的问题
2. 选择语言（中文/英文）
3. 点击"发送消息"按钮
4. 查看AI回答和参考来源

**示例问题**：
```
BC省租客可以养宠物吗？
房东可以随便进入出租屋吗？
如何驱逐不付租金的租客？
租约可以提前终止吗？
```

### 第五步：查看聊天历史

1. 在"聊天历史"模块
2. 点击"获取聊天历史"
3. 查看所有对话记录
4. 消息以气泡形式显示

### 第六步：测试其他功能

**BC省表格**：
- 点击"获取表格列表"
- 查看可用的租赁表格

**背景调查**：
- 填写租客信息
- 点击"提交背景调查"
- 查看权限验证结果

---

## 🎯 测试场景

### 场景1：完整功能测试（5分钟）

```
1. 打开页面 → 检查状态
2. 注册新用户 → 查看Token
3. 测试宠物问题 → 查看AI回答
4. 测试租金问题 → 查看来源文档
5. 测试押金问题 → 查看相关度
6. 获取聊天历史 → 查看对话记录
```

### 场景2：快速演示（2分钟）

```
1. 打开页面
2. 注册用户
3. 点击"🐕 宠物政策"快速测试
4. 点击"💰 租金上涨"快速测试
5. 完成！
```

### 场景3：双语测试

```
1. 注册用户
2. 测试中文问题
3. 切换语言为English
4. 测试英文问题
5. 对比回答质量
```

---

## 📸 界面预览

### 页面结构
```
┌─────────────────────────────────────┐
│     🏠 BC省房东管理系统              │
│     API测试界面 - 完整功能演示        │
│     ● 系统运行正常                   │
├─────────────────────────────────────┤
│  📌 使用说明                         │
│  1. 检查系统状态                     │
│  2. 注册用户或登录                   │
│  3. 测试AI聊天                       │
├─────────────────────────────────────┤
│  🔍 1. 系统状态检查                  │
│  [检查系统状态]                      │
├─────────────────────────────────────┤
│  🔐 2. 用户认证                      │
│  注册新用户  |  用户登录              │
├─────────────────────────────────────┤
│  🤖 3. AI智能聊天                    │
│  输入问题...  |  📝 快速测试问题      │
├─────────────────────────────────────┤
│  📜 4. 聊天历史                      │
│  [获取聊天历史] [获取所有会话]        │
├─────────────────────────────────────┤
│  📋 5. BC省租赁表格                  │
│  [获取表格列表]                      │
├─────────────────────────────────────┤
│  🔍 6. 租客背景调查                  │
│  填写租客信息...                     │
└─────────────────────────────────────┘
```

---

## 💡 特色功能

### 1. Token自动管理
- ✅ 登录后自动保存Token
- ✅ 刷新页面后仍然有效
- ✅ 一键清除功能
- ✅ 所有请求自动携带Token

### 2. 美观的聊天界面
- 👤 用户消息显示在右侧（紫色气泡）
- 🤖 AI回答显示在左侧（灰色气泡）
- 📚 参考来源用黄色背景高亮
- 📊 相关度百分比显示

### 3. 实时状态反馈
- 🟢 绿色：系统在线
- 🔴 红色：系统离线
- ⏳ 加载动画显示处理中
- ✅ 成功消息（绿色）
- ❌ 错误消息（红色）

### 4. 快速测试按钮
- 一键发送预设问题
- 自动填充输入框
- 自动选择正确语言
- 立即获取回答

---

## 🔧 高级功能

### 清除Token
如果需要切换账户：
1. 点击"清除Token"按钮
2. 重新登录或注册

### 清空对话
清空当前显示的聊天内容：
1. 点击"清空对话"按钮
2. 输入框也会被清空

### 查看原始JSON
所有API响应都以格式化的JSON显示，方便开发调试。

---

## 🐛 故障排除

### 问题1：页面打不开
**解决方案**：
```bash
# 检查服务器是否运行
cd /home/user/webapp
node serve-test-page.js
```

### 问题2：显示"系统离线"
**解决方案**：
```bash
# 检查后端服务
curl http://localhost:5000/api/health
```

### 问题3：无法发送消息
**解决方案**：
1. 确保已登录（页面显示Token）
2. 检查系统状态是否在线
3. 尝试清除Token重新登录

### 问题4：CORS错误
**原因**：浏览器跨域限制  
**解决方案**：使用Chrome，或在本地打开页面

---

## 📊 API端点测试覆盖

| API端点 | 测试功能 | 状态 |
|--------|---------|------|
| GET /api/health | 系统状态 | ✅ |
| POST /api/auth/register | 用户注册 | ✅ |
| POST /api/auth/login | 用户登录 | ✅ |
| POST /api/chat/message | AI聊天 | ✅ |
| GET /api/chat/history/:id | 聊天历史 | ✅ |
| GET /api/chat/sessions | 会话列表 | ✅ |
| GET /api/forms | 表格列表 | ✅ |
| POST /api/background-check/request | 背景调查 | ✅ |
| GET /api/background-check/history | 调查历史 | ✅ |

---

## 🎨 界面主题

**配色方案**：
- 主色调：紫色渐变 (#667eea → #764ba2)
- 成功色：绿色 (#28a745)
- 错误色：红色 (#dc3545)
- 警告色：橙色 (#ff9800)
- 背景色：白色/浅灰

**设计特点**：
- 现代化卡片式布局
- 圆角和阴影效果
- 平滑的过渡动画
- 响应式网格布局

---

## 🚀 快速命令

### 启动测试页面服务器
```bash
cd /home/user/webapp
node serve-test-page.js
```

### 停止服务器
按 `Ctrl + C`

### 在新端口启动
```bash
PORT=9000 node serve-test-page.js
```

### 查看服务器日志
服务器会在控制台输出所有请求日志

---

## 📱 移动端支持

网页完全响应式，支持：
- 📱 手机浏览器
- 💻 平板电脑
- 🖥️ 桌面电脑

在手机上访问：
1. 打开手机浏览器
2. 输入公网地址
3. 正常使用所有功能

---

## 🎓 学习资源

通过这个测试页面，您可以学习：
- RESTful API的使用
- JWT Token认证机制
- 前后端交互流程
- AJAX异步请求
- DOM操作和事件处理
- LocalStorage使用

---

## 🌟 最佳实践

### 测试建议
1. ✅ 先检查系统状态
2. ✅ 先注册/登录再测试
3. ✅ 使用快速测试按钮快速体验
4. ✅ 测试多个不同的问题
5. ✅ 查看聊天历史验证记录

### 演示技巧
1. 🎯 准备好几个示例问题
2. 🎯 展示中英文双语切换
3. 🎯 强调AI回答的准确性
4. 🎯 展示参考来源和相关度
5. 🎯 展示聊天历史功能

---

## 📞 获取帮助

如果遇到问题：
1. 查看浏览器控制台（F12）
2. 检查网络请求（Network标签）
3. 查看后端日志
4. 参考HOW_TO_TEST.md文档

---

## 🎉 开始测试！

**立即访问测试页面**：
```
https://8080-i75t2b5146b2ag3brd419-ad490db5.sandbox.novita.ai
```

**现在就体验完整的BC省房东管理系统！** 🚀

---

**页面特点总结**：
- ✨ 美观现代的界面设计
- 🚀 功能完整的API测试
- 💾 智能的Token管理
- 🎯 便捷的快速测试
- 📊 清晰的状态反馈
- 🌐 完全响应式布局
- 🔧 易于使用和调试

**享受测试过程！** 🎊
